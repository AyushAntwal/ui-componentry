---
title: FormTextField
description: Fully typed MUI + React Hook Form text input with validation, helper text, and character counter.
---

# FormTextField

A robust, accessible, and type-safe text input component built on top of **React Hook Form** and **MUI**.

This page documents the component API, props, usage examples, accessibility notes, testing strategies, and recommended patterns ‚Äî everything you need to integrate and extend the `FormTextField` component in a production-scale React application.

---

### üöÄ Features

- 100% TypeScript support
- Character counter (`maxLength` support)
- Trims leading spaces
- Error handling + helper text
- Override `control` for nested forms
- MUI-compatible (`fieldProps`)
- Accessible with `aria-describedby`

---

### üì¶ Component Source Code

```tsx
import React from "react";
import {
  Controller,
  useFormContext,
  type Control,
  type RegisterOptions,
} from "react-hook-form";
import TextField, { type TextFieldProps } from "@mui/material/TextField";
import Box from "@mui/material/Box";
import Typography from "@mui/material/Typography";

export type FormTextFieldProps = {
  name: string;
  label?: string;
  placeholder?: string;
  required?: boolean;
  helpingText?: string;
  maxLength?: number;
  control?: Control<any>;
  rules?: RegisterOptions;
  fullWidth?: boolean;
  fieldProps?: TextFieldProps;
  id?: string;
};

export default function FormTextField(props: FormTextFieldProps) {
  const {
    name,
    label,
    placeholder,
    required = false,
    helpingText,
    maxLength,
    control: controlOverride,
    rules,
    fullWidth = true,
    fieldProps,
    id,
  } = props;

  const formContext = useFormContext();
  const control = controlOverride ?? (formContext?.control as Control<any>);
  const helperId = id ? `${id}-helper` : `${name}-helper`;

  return (
    <Controller
      name={name}
      control={control}
      rules={rules}
      render={({ field, fieldState }) => {
        const value = field.value ?? "";
        const errorMessage = fieldState.error?.message;
        const showCounter = typeof maxLength === "number";
        const isError = !!errorMessage;

        const helper = (
          <Box
            sx={{
              display: "flex",
              justifyContent: "space-between",
              alignItems: "center",
            }}
          >
            <Typography
              id={helperId}
              variant="caption"
              color={isError ? "error" : "text.secondary"}
            >
              {errorMessage ?? helpingText ?? ""}
            </Typography>

            {showCounter && (
              <Typography variant="caption" color="text.secondary">
                {String(value).length} / {maxLength}
              </Typography>
            )}
          </Box>
        );

        return (
          <TextField
            {...field}
            id={id}
            label={label ? `${label}${required ? " *" : ""}` : undefined}
            placeholder={placeholder}
            required={required}
            fullWidth={fullWidth}
            error={isError}
            aria-describedby={helperId}
            helperText={helper}
            value={value}
            onChange={(e) => field.onChange(String(e.target.value).trimStart())}
            inputProps={{ maxLength }}
            {...fieldProps}
          />
        );
      }}
    />
  );
}
```

---

### üìö Props Reference

| Prop          | Type              | Default                 | Description                     |
| ------------- | ----------------- | ----------------------- | ------------------------------- |
| `name`        | `string`          | ‚Äî                       | Form field name                 |
| `label`       | `string`          | ‚Äî                       | Input label                     |
| `placeholder` | `string`          | ‚Äî                       | MUI placeholder                 |
| `required`    | `boolean`         | `false`                 | Marks field visually required   |
| `helpingText` | `string`          | ‚Äî                       | Helper text shown when no error |
| `maxLength`   | `number`          | ‚Äî                       | Shows character counter         |
| `control`     | `Control<any>`    | From `useFormContext()` | Override form context           |
| `rules`       | `RegisterOptions` | ‚Äî                       | Validation rules                |
| `fullWidth`   | `boolean`         | `true`                  | Full width MUI field            |
| `fieldProps`  | `TextFieldProps`  | ‚Äî                       | Pass-through MUI props          |
| `id`          | `string`          | Generated               | For accessibility & testing     |

---

### üß™ Basic Usage

```tsx
import { useForm, FormProvider } from "react-hook-form";
import FormTextField from "@/components/form/fields/FormTextField";

export default function ExampleForm() {
  const methods = useForm({ defaultValues: { username: "" } });

  return (
    <FormProvider {...methods}>
      <form onSubmit={methods.handleSubmit(console.log)}>
        <FormTextField
          name="username"
          label="Username"
          placeholder="Type here..."
        />
      </form>
    </FormProvider>
  );
}
```

---

### üîê Validation Example

```tsx
<FormTextField
  name="email"
  label="Email"
  required
  rules={{
    required: "Email is required",
    pattern: { value: /^\S+@\S+\.\S+$/, message: "Invalid email" },
  }}
  fieldProps={{ size: "small", variant: "outlined" }}
/>
```

---

### ‚úçÔ∏è Character Counter Example

```tsx
<FormTextField
  name="bio"
  label="Short Bio"
  maxLength={250}
  fieldProps={{ multiline: true, rows: 3 }}
  helpingText="Tell us about yourself."
/>
```

---

### üé® MUI Customization

```tsx
<FormTextField
  name="search"
  label="Search"
  fieldProps={{
    variant: "filled",
    InputProps: {
      startAdornment: <SearchIcon />,
    },
    sx: { bgcolor: "background.paper" },
  }}
/>
```

---

### ‚ôø Accessibility Notes

- Uses MUI label ‚Üí automatically accessible
- `aria-describedby` connects helper/error text
- Pass custom `id` for robust testing & screen readers
- Error messages override helper text automatically

---

### üßµ Storybook Example

```tsx
import { useForm, FormProvider } from "react-hook-form";
import FormTextField from "./FormTextField";

export default { title: "Form/FormTextField" };

export const Default = () => {
  const methods = useForm({ defaultValues: { name: "" } });

  return (
    <FormProvider {...methods}>
      <FormTextField name="name" label="Name" />
    </FormProvider>
  );
};
```

---

### üß© Full Example

```tsx
<FormProvider {...methods}>
  <form onSubmit={methods.handleSubmit(onSubmit)}>
    <FormTextField
      id="signup-displayName"
      name="displayName"
      label="Display name"
      required
      maxLength={40}
      helpingText="40 characters max."
      rules={{ required: "Display name is required" }}
      fieldProps={{ variant: "outlined", size: "small" }}
    />
  </form>
</FormProvider>
```

---

### üõ† Troubleshooting

**Why is the value undefined?**
Make sure your form is wrapped in `FormProvider`, or pass `control` manually.

**Emoji counting looks incorrect.**
`String.length` counts UTF-16 characters. Use `grapheme-splitter` for emoji-safe counting.

**Leading spaces disappear. Why?**
The component trims text using `trimStart()`. Remove or modify the `onChange` to change this behavior.
